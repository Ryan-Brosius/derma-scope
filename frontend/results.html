<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Diagnosis Results</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
  <style>
      .mode-label {
          font-size: 1.2rem;
          font-weight: bold;
          padding: 5px 15px;
          border-radius: 5px;
          cursor: pointer;
      }
      .active-mode {
          background-color: #007bff;
          color: white;
      }
  </style>
</head>
<body>

  <!-- Results Container -->
  <div class="container mt-5 pt-5 text-center">
      <h1>Diagnosis Results</h1>

      <!-- Clickable Mode Switch -->
      <div class="mt-4 d-flex justify-content-center align-items-center">
          <span id="doctorLabel" class="mode-label active-mode" onclick="switchMode('doctor')">Doctor Mode</span>
          <span class="mx-2">|</span>
          <span id="patientLabel" class="mode-label" onclick="switchMode('patient')">Patient Mode</span>
      </div>

      <!-- Doctor Mode Sections -->
      <div id="doctorSections">
          <div class="mt-4">
              <h2>Diagnosis</h2>
              <textarea id="doctorDiagnosis" class="form-control text-center" rows="5" readonly>Loading diagnosis...</textarea>
          </div>

          <div class="mt-4">
              <h2>Diagnosis Reason</h2>
              <textarea id="diagnosisReason" class="form-control text-center" rows="5" readonly>Loading reasoning...</textarea>
          </div>

          <div class="mt-4">
              <h2>Patient Report</h2>
              <textarea id="patientReport" class="form-control text-center" rows="5" readonly>Generating patient report...</textarea>
          </div>
      </div>

      <!-- Patient Mode Sections -->
      <div id="patientSections" style="display: none;">
          <div class="mt-4">
              <h2>Diagnosis</h2>
              <textarea id="patientDiagnosis" class="form-control text-center" rows="5" readonly>Loading diagnosis...</textarea>
          </div>

          <div class="mt-4">
              <h2>Treatment Plan</h2>
              <textarea id="treatmentPlan" class="form-control text-center" rows="5" readonly>Loading treatment plan...</textarea>
          </div>
      </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
      // Example data (Replace with actual GPT-generated responses)
      const doctorDiagnosis = "This is a detailed medical diagnosis, including lesion classification and potential biopsy recommendations.";
      const diagnosisReason = "Medical justification based on observed lesion patterns, risk factors, and differential diagnosis.";
      const patientReport = "A structured report containing key findings, recommendations, and suggested next steps for the patient.";

      const patientDiagnosis = "A simplified explanation of the condition for the patient.";
      const treatmentPlan = "A step-by-step treatment plan for the patient, including medications, home care, and follow-up recommendations.";

      function switchMode(mode) {
          const doctorLabel = document.getElementById("doctorLabel");
          const patientLabel = document.getElementById("patientLabel");

          const doctorSections = document.getElementById("doctorSections");
          const patientSections = document.getElementById("patientSections");

          if (mode === "doctor") {
              doctorSections.style.display = "block";
              patientSections.style.display = "none";

              doctorLabel.classList.add("active-mode");
              patientLabel.classList.remove("active-mode");

              // Update content
              document.getElementById("doctorDiagnosis").value = doctorDiagnosis;
              document.getElementById("diagnosisReason").value = diagnosisReason;
              document.getElementById("patientReport").value = patientReport;
          } else {
              doctorSections.style.display = "none";
              patientSections.style.display = "block";

              patientLabel.classList.add("active-mode");
              doctorLabel.classList.remove("active-mode");

              // Update content
              document.getElementById("patientDiagnosis").value = patientDiagnosis;
              document.getElementById("treatmentPlan").value = treatmentPlan;
          }
      }

      // Set default mode to Doctor
      switchMode("doctor");
  </script>

<div id="navbar-container"></div>
<script>
    async function loadNavbar() {
        const response = await fetch("navbar.html");
        const navbarHTML = await response.text();
        document.getElementById("navbar-container").innerHTML = navbarHTML;
    }
    loadNavbar();
</script>

</body>
</html>
